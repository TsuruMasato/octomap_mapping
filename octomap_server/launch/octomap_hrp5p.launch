<!--
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the MIT License.
-->

<launch>
  <node pkg="octomap_server" type="octomap_server_node" name="octomap_server_node" output="screen">
    <remap from="cloud_in" to="/self_filtered_cloud"/>
    <param name="max_depth" type="int" value="16"/>
    <param name="frame_id" type="string" value="choreonoid_origin"/>
    <param name="resolution" type="double" value="0.02"/>
    <param name="camera_initial_height" type="double" value="0.4"/>
    <param name="sensor_model/max_range" type="double" value="5.0"/>
    <param name="sensor_model/min" type="double" value="0.3"/>
    <param name="filter_speckles" type="bool" value="true"/>
    <param name="publish_free_space" type="bool" value="false"/>
    <param name="color_as_primitive_mode" type="bool" value="true"/>
    <param name="color_as_normal_vector_mode" type="bool" value="false"/>
  </node>

  <node pkg="rviz" type="rviz" name="rviz" args="-d $(find octomap_server)/launch/rviz_octomap_hrp5p.rviz"/>

  <node pkg="robot_self_filter" type="self_filter" name="robot_self_filter">
    <remap from="cloud_in" to="/multisense/organized_image_points2_color"/>
    <remap from="cloud_out" to="/self_filtered_cloud" />
    <param name="sensor_frame" type="string" value="left_camera_optical_frame"/>
    <param name="use_rgb" type="bool" value="true"/>
    <rosparam command="load" file="$(find octomap_server)/launch/hrp5p_self_filter_links.yaml"/>
  </node>

</launch>
